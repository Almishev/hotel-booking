# üê≥ Docker Setup –∑–∞ Phegon Hotel

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–∏ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è

- Docker Desktop –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω –∏ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω
- Docker Compose (–≤–∫–ª—é—á–µ–Ω –≤ Docker Desktop)

## üöÄ –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Å Docker

### –°—Ç—ä–ø–∫–∞ 1: –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–û—Ç –∫–æ—Ä–Ω–µ–≤–∞—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑–ø—ä–ª–Ω–µ—Ç–µ:

```bash
docker-compose up -d
```

–¢–æ–≤–∞ —â–µ:
- –ò–∑—Ç–µ–≥–ª–∏ PostgreSQL 15 Alpine –æ–±—Ä–∞–∑
- –°—ä–∑–¥–∞–¥–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∏–º–µ `phegon-hotel-db`
- –°—Ç–∞—Ä—Ç–∏—Ä–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –Ω–∞ –ø–æ—Ä—Ç `5432`
- –°—ä–∑–¥–∞–¥–µ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ `phegonhotel` —Å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª `phegonuser`

### –°—Ç—ä–ø–∫–∞ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ä—Ç —Ä–∞–±–æ—Ç–∏:

```bash
docker ps
```

–¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ `phegon-hotel-db` –≤ —Å–ø–∏—Å—ä–∫–∞.

### –°—Ç—ä–ø–∫–∞ 3: –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ Backend

Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –≤–µ—á–µ –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–æ –¥–∞ —Å–µ —Å–≤—ä—Ä–∑–≤–∞ —Å Docker –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏:

```bash
cd backend
mvn spring-boot:run
```

Backend —â–µ —Å–µ —Å—Ç–∞—Ä—Ç–∏—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç `8081` –∏ —â–µ —Å–µ —Å–≤—ä—Ä–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –¥–∞–Ω–Ω–∏ –∑–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

–ê–∫–æ –∏—Å–∫–∞—Ç–µ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ—Ç–æ –∏–º–µ, –ø–∞—Ä–æ–ª–∞—Ç–∞ –∏–ª–∏ –∏–º–µ—Ç–æ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏:

1. –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π—Ç–µ `docker-compose.yml`:
   ```yaml
   environment:
     POSTGRES_DB: your_database_name
     POSTGRES_USER: your_username
     POSTGRES_PASSWORD: your_password
   ```

2. –û–±–Ω–æ–≤–µ—Ç–µ `application.properties` –≤ `backend/src/main/resources/` —Å—ä—Å —Å—ä—â–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏.

### –ü–æ—Ä—Ç –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

–ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ PostgreSQL —Ä–∞–±–æ—Ç–∏ –Ω–∞ –ø–æ—Ä—Ç `5432`. –ê–∫–æ –∏—Å–∫–∞—Ç–µ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –¥—Ä—É–≥ –ø–æ—Ä—Ç, –ø—Ä–æ–º–µ–Ω–µ—Ç–µ –≤ `docker-compose.yml`:

```yaml
ports:
  - "5433:5432"  # –í–Ω–µ—à–µ–Ω –ø–æ—Ä—Ç:–í—ä—Ç—Ä–µ—à–µ–Ω –ø–æ—Ä—Ç
```

–ò –æ–±–Ω–æ–≤–µ—Ç–µ `application.properties`:
```properties
spring.datasource.url=jdbc:postgresql://localhost:5433/phegonhotel
```

## üõë –°–ø–∏—Ä–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

–ó–∞ —Å–ø–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker-compose down
```

–ó–∞ —Å–ø–∏—Ä–∞–Ω–µ –∏ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ (volume):

```bash
docker-compose down -v
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –¢–æ–≤–∞ —â–µ –∏–∑—Ç—Ä–∏–µ –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ –≤ –±–∞–∑–∞—Ç–∞!

## üìä –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ

–ú–æ–∂–µ—Ç–µ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ—Ç–µ —Å –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —á—Ä–µ–∑:

### Docker exec –∫–æ–º–∞–Ω–¥–∞:

```bash
docker exec -it phegon-hotel-db psql -U phegonuser -d phegonhotel
```

### –ò–ª–∏ –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ GUI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–∞—Ç–æ:
- pgAdmin
- DBeaver
- DataGrip

–°–ª–µ–¥–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏:
- **Host:** localhost
- **Port:** 5432
- **Database:** phegonhotel
- **Username:** phegonuser
- **Password:** phegonpass123

## üîÑ –ü—Ä–µ–∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

–ê–∫–æ –∏—Å–∫–∞—Ç–µ –¥–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Å —á–∏—Å—Ç–∏ –¥–∞–Ω–Ω–∏:

```bash
docker-compose down -v
docker-compose up -d
```

## üìù –ü–æ–ª–µ–∑–Ω–∏ –∫–æ–º–∞–Ω–¥–∏

```bash
# –í–∏–∂—Ç–µ –ª–æ–≥–æ–≤–µ—Ç–µ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose logs postgres

# –°–ª–µ–¥–µ—Ç–µ –ª–æ–≥–æ–≤–µ—Ç–µ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ
docker-compose logs -f postgres

# –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose restart postgres
```

## üêõ –û—Ç—Å—Ç—Ä–∞–Ω—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏

### –ü—Ä–æ–±–ª–µ–º: –ü–æ—Ä—Ç 5432 –≤–µ—á–µ –µ –∑–∞–µ—Ç

–ê–∫–æ –∏–º–∞—Ç–µ –¥—Ä—É–≥ PostgreSQL –∏–Ω—Å—Ç–∞–Ω—Å –Ω–∞ –ø–æ—Ä—Ç 5432, –ø—Ä–æ–º–µ–Ω–µ—Ç–µ –ø–æ—Ä—Ç–∞ –≤ `docker-compose.yml`.

### –ü—Ä–æ–±–ª–µ–º: Backend –Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ —Å –±–∞–∑–∞—Ç–∞

1. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ä—Ç —Ä–∞–±–æ—Ç–∏: `docker ps`
2. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –ª–æ–≥–æ–≤–µ—Ç–µ: `docker-compose logs postgres`
3. –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ `application.properties` –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏

### –ü—Ä–æ–±–ª–µ–º: –î–∞–Ω–Ω–∏—Ç–µ —Å–µ –≥—É–±—è—Ç –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç

–î–∞–Ω–Ω–∏—Ç–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –≤ Docker volume `postgres_data`. –¢–µ —â–µ –æ—Å—Ç–∞–Ω–∞—Ç –¥–æ—Ä–∏ —Å–ª–µ–¥ —Ä–µ—Å—Ç–∞—Ä—Ç –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ó–∞ –¥–∞ –∑–∞–ø–∞–∑–∏—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ, –Ω–µ –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ `docker-compose down -v`.

## üéØ –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏

–°–ª–µ–¥ –∫–∞—Ç–æ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Ä–∞–±–æ—Ç–∏, –º–æ–∂–µ—Ç–µ –¥–∞:

1. –°—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
2. –°—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
3. –¢–µ—Å—Ç–≤–∞—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç—Ç–∞

---

**–ó–∞–±–µ–ª–µ–∂–∫–∞:** –¢–æ–≤–∞ –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞ –ª–æ–∫–∞–ª–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞. –ó–∞ production –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç.

