server.port=${PORT:8081}

spring.application.name=PhegonHotel
# Supabase PostgreSQL Connection - Uses environment variables for production
# For local development, uses default Supabase connection
# For production (Render), set SPRING_DATASOURCE_URL environment variable
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://aws-1-eu-west-1.pooler.supabase.com:5432/postgres?user=postgres.plbbjyxhlcruxtmyxcjy&password=Asroma%40123&sslmode=require}

spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update

# HikariCP Connection Pool Configuration (за Supabase Session mode pooler)
# Намален pool size за да не надхвърля лимита на Supabase (обикновено 15-20 connections)
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# Hibernate настройки за по-добра работа със Supabase pooler
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

#THE MAXIMUM SIGN OF IMAGE THAT CAN BE UPLOADEDА
spring.servlet.multipart.max-file-size=2GB
spring.servlet.multipart.max-request-size=2GB

#CLOUDINARY CONFIGURATION
cloudinary.cloud_name=${CLOUDINARY_CLOUD_NAME:dwlmmwwyr}
cloudinary.api_key=${CLOUDINARY_API_KEY:788681752119862}
cloudinary.api_secret=${CLOUDINARY_API_SECRET:q-pESETw4NyiBzVKBJ-KTc89Ixs}

#EMAIL CONFIGURATION
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:mineralhotelinfo@gmail.com}
spring.mail.password=${SPRING_MAIL_PASSWORD:ylnppaqssnyjftcc}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
# For development: disable SSL certificate validation (remove in production!)
spring.mail.properties.mail.smtp.ssl.checkserveridentity=false

# Internationalization
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=true
spring.messages.cache-duration=3600

#JWT CONFIGURATION
jwt.secret=${JWT_SECRET:PhegonHotelSecretKey2024ForJWTTokenGenerationAndValidation}
jwt.expiration=${JWT_EXPIRATION:86400000}


