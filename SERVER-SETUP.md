# üñ•Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞ —Å–ª–µ–¥ Pull

–¢–æ–≤–∞ —Ä—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–±—è—Å–Ω—è–≤–∞ –∫–∞–∫ –¥–∞ –æ–±–Ω–æ–≤–∏—à —Å—ä—Ä–≤—ä—Ä–∞ —Å–ª–µ–¥ –∫–∞—Ç–æ –Ω–∞–ø—Ä–∞–≤–∏—à `git pull` –∏ –∫–∞–∫ –¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞—à –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏.

## üì• –°—Ç—ä–ø–∫–∞ 1: Pull –Ω–∞ –Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–∏

```bash
# –í–ª–µ–∑ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞
cd /root/hotel-booking

# Pull –Ω–∞ –Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–∏
git pull origin main
```

## üîß –°—Ç—ä–ø–∫–∞ 2: –°—ä–∑–¥–∞–π/–û–±–Ω–æ–≤–∏ .env —Ñ–∞–π–ª–∞

### –ê–∫–æ –Ω—è–º–∞—à .env —Ñ–∞–π–ª:

```bash
# –ö–æ–ø–∏—Ä–∞–π —à–∞–±–ª–æ–Ω–∞
cp env.example .env.production

# –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π —Ñ–∞–π–ª–∞
nano .env.production
```

### –ê–∫–æ –≤–µ—á–µ –∏–º–∞—à .env —Ñ–∞–π–ª:

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏—è —Ñ–∞–π–ª
nano .env.production
```

## üìù –°—Ç—ä–ø–∫–∞ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π Database Connection

**–í–ê–ñ–ù–û:** –ó–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—à PostgreSQL –≤ Docker –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞, —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—à `postgres` –∫–∞—Ç–æ hostname (–∏–º–µ—Ç–æ –Ω–∞ service-–∞ –≤ docker-compose), –Ω–µ `localhost`!

–ü–æ–ø—ä–ª–Ω–∏ —Å–ª–µ–¥–Ω–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –≤ `.env.production`:

```env
# ============================================
# DATABASE - PostgreSQL (Docker –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞)
# ============================================
# –í–ê–ñ–ù–û: –ò–∑–ø–æ–ª–∑–≤–∞–π "postgres" –∫–∞—Ç–æ hostname (–∏–º–µ—Ç–æ –Ω–∞ service-–∞)!
POSTGRES_DB=phegonhotel
POSTGRES_USER=postgres
POSTGRES_PASSWORD=–¢–≤–æ–π–°–∏–ª–Ω–∞–ü–∞—Ä–æ–ª–∞123!

# Database Connection String
# –ó–∞–±–µ–ª–µ–∂–∏: hostname –µ "postgres", –Ω–µ "localhost"!
SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/phegonhotel?user=postgres&password=–¢–≤–æ–π–°–∏–ª–Ω–∞–ü–∞—Ä–æ–ª–∞123!
```

### –ó–∞—â–æ "postgres" –∫–∞—Ç–æ hostname?

–í Docker Compose, services –º–æ–≥–∞—Ç –¥–∞ —Å–µ –¥–æ—Å—Ç—ä–ø–≤–∞—Ç –ø–æ –∏–º–µ –≤ —Å—ä—â–∞—Ç–∞ –º—Ä–µ–∂–∞. Service-—ä—Ç —Å–µ –∫–∞–∑–≤–∞ `postgres` –≤ `docker-compose.yml`, –∑–∞—Ç–æ–≤–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ `postgres:5432`.

## üîÑ –°—Ç—ä–ø–∫–∞ 4: –ö–æ–ø–∏—Ä–∞–π .env.production –≤ .env

```bash
# –ö–æ–ø–∏—Ä–∞–π production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞
cp .env.production .env
```

## üê≥ –°—Ç—ä–ø–∫–∞ 5: –°–ø–∏—Ä–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (–∞–∫–æ –∏–º–∞)

```bash
# –°–ø—Ä–∏ –≤—Å–∏—á–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
docker compose down

# –ò–ª–∏ –∞–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—à production compose:
docker compose -f docker-compose.yml -f docker-compose.prod.yml down
```

## üöÄ –°—Ç—ä–ø–∫–∞ 6: –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

### –í–∞—Ä–∏–∞–Ω—Ç A: –° production compose —Ñ–∞–π–ª–æ–≤–µ

```bash
docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –° helper —Å–∫—Ä–∏–ø—Ç (–∞–∫–æ –µ –∏–∑–ø—ä–ª–Ω–∏–º)

```bash
chmod +x start-prod.sh
./start-prod.sh
```

## ‚úÖ –°—Ç—ä–ø–∫–∞ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏—Ç–µ:

```bash
docker compose ps
```

–¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—à:
- `phegon-hotel-postgres` - Running
- `phegon-hotel-backend` - Running
- `phegon-hotel-frontend` - Running
- `phegon-hotel-nginx` - Running

### –ü—Ä–æ–≤–µ—Ä–∏ –ª–æ–≥–æ–≤–µ:

```bash
# –í—Å–∏—á–∫–∏ –ª–æ–≥–æ–≤–µ
docker compose logs -f

# –°–∞–º–æ PostgreSQL
docker compose logs postgres

# –°–∞–º–æ Backend
docker compose logs backend
```

### –ü—Ä–æ–≤–µ—Ä–∏ database connection:

```bash
# –í–ª–µ–∑ –≤ PostgreSQL
docker exec -it phegon-hotel-postgres psql -U postgres -d phegonhotel

# –ü—Ä–æ–≤–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ
\dt

# –ò–∑–ª–µ–∑
\q
```

## üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

**–î–æ–±—Ä–∞ –Ω–æ–≤–∏–Ω–∞:** –ù—è–º–∞ –Ω—É–∂–¥–∞ –æ—Ç —Ä—ä—á–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è! Spring Boot –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —â–µ —Å—ä–∑–¥–∞–¥–µ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ –ø—Ä–∏ –ø—ä—Ä–≤–æ—Ç–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∏?

–í `application.properties` –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–æ:
```properties
spring.jpa.hibernate.ddl-auto=update
```

–¢–æ–≤–∞ –æ–∑–Ω–∞—á–∞–≤–∞, —á–µ Hibernate –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- ‚úÖ –°—ä–∑–¥–∞–≤–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ (–∞–∫–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞)
- ‚úÖ –°—ä–∑–¥–∞–≤–∞ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ —Å–ø–æ—Ä–µ–¥ Entity –∫–ª–∞—Å–æ–≤–µ—Ç–µ
- ‚úÖ –û–±–Ω–æ–≤—è–≤–∞ —Å—Ö–µ–º–∞—Ç–∞ –ø—Ä–∏ –ø—Ä–æ–º–µ–Ω–∏ –≤ Entity –∫–ª–∞—Å–æ–≤–µ—Ç–µ

### –ö–∞–∫–≤–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à?

**–ù–∏—â–æ!** –ü—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –∏ –±–∞–∑–∞—Ç–∞ —â–µ —Å–µ —Å—ä–∑–¥–∞–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

```bash
docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build
```

Backend-—ä—Ç —â–µ –∏–∑—á–∞–∫–∞ PostgreSQL –¥–∞ –µ –≥–æ—Ç–æ–≤, —â–µ —Å–µ —Å–≤—ä—Ä–∂–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —â–µ —Å—ä–∑–¥–∞–¥–µ –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–µ–¥ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ:

```bash
# –í–ª–µ–∑ –≤ PostgreSQL
docker exec -it phegon-hotel-postgres psql -U postgres -d phegonhotel

# –ü—Ä–æ–≤–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ (—Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—à –≤—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ)
\dt

# –ò–∑–ª–µ–∑
\q
```

### –ê–∫–æ –∏—Å–∫–∞—à –¥–∞ –∑–∞–ø–æ—á–Ω–µ—à –Ω–∞ —á–∏—Å—Ç–æ:

–ê–∫–æ –∏—Å–∫–∞—à –¥–∞ –∏–∑—Ç—Ä–∏–µ—à –≤—Å–∏—á–∫–æ –∏ –¥–∞ –∑–∞–ø–æ—á–Ω–µ—à –æ—Ç–Ω–æ–≤–æ:

```bash
# –°–ø—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏—Ç–µ
docker compose down

# –ò–∑—Ç—Ä–∏–π volume-–∞ —Å –¥–∞–Ω–Ω–∏—Ç–µ (–í–ù–ò–ú–ê–ù–ò–ï: –¢–æ–≤–∞ –∏–∑—Ç—Ä–∏–≤–∞ –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏!)
docker volume rm hotel-booking_postgres_data

# –°—Ç–∞—Ä—Ç–∏—Ä–∞–π –æ—Ç–Ω–æ–≤–æ
docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build
```

## ‚ö†Ô∏è –í–∞–∂–Ω–∏ –±–µ–ª–µ–∂–∫–∏

1. **–ü–∞—Ä–æ–ª–∞:** –ò–∑–ø–æ–ª–∑–≤–∞–π —Å–∏–ª–Ω–∞ –ø–∞—Ä–æ–ª–∞ –∑–∞ `POSTGRES_PASSWORD`
2. **Hostname:** –í–∏–Ω–∞–≥–∏ –∏–∑–ø–æ–ª–∑–≤–∞–π `postgres` –∫–∞—Ç–æ hostname –≤ `SPRING_DATASOURCE_URL`, –Ω–µ `localhost`
3. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç:** –î–∞–Ω–Ω–∏—Ç–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –≤ Docker volume `postgres_data`
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—ä–∑–¥–∞–≤–∞–Ω–µ:** –ë–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –∏ —Ç–∞–±–ª–∏—Ü–∏—Ç–µ —Å–µ —Å—ä–∑–¥–∞–≤–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø—ä—Ä–≤–æ—Ç–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ
5. **Backup:** –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–∞–≤ backup –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º: Backend –Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ —Å –±–∞–∑–∞—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ä—Ç —Ä–∞–±–æ—Ç–∏: `docker compose ps postgres`
2. –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ `SPRING_DATASOURCE_URL` –∏–∑–ø–æ–ª–∑–≤–∞ `postgres` –∫–∞—Ç–æ hostname
3. –ü—Ä–æ–≤–µ—Ä–∏ –ª–æ–≥–æ–≤–µ: `docker compose logs backend | grep -i database`

### –ü—Ä–æ–±–ª–µ–º: "Host not found: postgres"

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ—Ä–∏ —Å–µ, —á–µ backend –∏ postgres —Å–∞ –≤ —Å—ä—â–∞—Ç–∞ Docker –º—Ä–µ–∂–∞
- –ü—Ä–æ–≤–µ—Ä–∏ `docker-compose.yml` –¥–∞–ª–∏ –∏–º–∞ `networks` —Å–µ–∫—Ü–∏—è
- –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏—Ç–µ: `docker compose restart`

### –ü—Ä–æ–±–ª–µ–º: "Authentication failed"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏ `POSTGRES_PASSWORD` –≤ `.env` —Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∏ `SPRING_DATASOURCE_URL` –¥–∞ —Å—ä–¥—ä—Ä–∂–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏—è –ø–∞—Ä–æ–ª–∞
- –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏—Ç–µ: `docker compose restart`

---

**–£—Å–ø–µ—à–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞!** üéâ

